{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/action.js","src/lib/game.js","src/lib/scene.js","src/lib/scenes/boot.js","src/lib/scenes/play.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"action.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const debug = \"@@debug\";\r\nconst font = \"Cute Font\";\r\nconst Game = require(\"./lib/game\");\r\n\r\nWebFont.load({\r\n    google: {\r\n        families: [font]\r\n    },\r\n    active() {\r\n        // new game\r\n        const gameObject = new Game(window.innerWidth, window.innerHeight, font, debug);\r\n    }\r\n});\r\n","// load scenes\r\nconst BootScene = require(\"./scenes/boot\");\r\nconst PlayScene = require(\"./scenes/play\");\r\n\r\nclass Game extends Phaser.Game {\r\n    constructor(width = window.innerWidth, height = window.innerHeight, font, debug = false) {\r\n        if (debug) {\r\n            console.time(\"Game\");\r\n        }\r\n        super({\r\n            renderer: Phaser.AUTO,\r\n            antialias: true,\r\n            backgroundColor: \"#fcf1de\",\r\n            pixelArt: true,\r\n            roundPixels: true,\r\n            autoCenter: true,\r\n            banner: debug,\r\n            disableContextMenu: !debug,\r\n            scale: {\r\n                mode: Phaser.Scale.RESIZE,\r\n                parent: \"game\",\r\n                width: window.innerWidth,\r\n                height: window.innerHeight\r\n            },\r\n            scene: [\r\n                BootScene,\r\n                PlayScene\r\n            ]\r\n        });\r\n        this.font = font;\r\n        this.debug = debug;\r\n    }\r\n    start() {\r\n        super.start();\r\n        if (this.debug) {\r\n            console.timeEnd(\"Game\");\r\n        }\r\n        this.scale.on(\"resize\", () => {\r\n            window.location.reload();\r\n        });\r\n    }\r\n    sceneLog(name, log) {\r\n        if (this.debug) {\r\n            console.groupCollapsed(`%cScene Log [${name}]`, \"color: green;\");\r\n            console.table(log);\r\n            console.groupEnd();\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = Game;","class Scene extends Phaser.Scene {\r\n    constructor(name) {\r\n        super(name);\r\n        this.name = name;\r\n        this.keepLog = [];\r\n    }\r\n    log(message = null, system = false) {\r\n        if (this.game.debug && message) {\r\n            this.keepLog.push({\r\n                message,\r\n                bySystem: system\r\n            });\r\n        }\r\n        return this.keepLog;\r\n    }\r\n    init() {\r\n        this.log(\"init\", true);\r\n    }\r\n    preload() {\r\n        this.log(\"preload\", true);\r\n    }\r\n    create() {\r\n        this.log(\"create\", true);\r\n        this.game.sceneLog(this.name, this.keepLog);\r\n        this.ground = this.add.tileSprite(-2, this.game.config.height + 2, this.game.config.width + 4, this.game.config.height * 0.2, \"ground\")\r\n            .setOrigin(0, 1)\r\n            .setTileScale((this.game.device.os.desktop ? 1 : 0.6))\r\n            .setDepth(0);\r\n        this.ground.speed = { current: 0, pause: 0, min: 0.4, mid: 0.8, max: 1 };\r\n        this.city = this.add.tileSprite(0, this.game.config.height * 0.8, this.game.config.width, 109, \"city\")\r\n            .setOrigin(0, 1)\r\n            .setDepth(1);\r\n        this.city.speed = { current: 0, pause: 0, min: 0.2, mid: 0.4, max: 0.8 };\r\n        this.cloud = this.add.tileSprite(0, this.game.config.height * 0.7, this.game.config.width, 105, \"cloud\")\r\n            .setOrigin(0, 1)\r\n            .setDepth(2);\r\n        this.cloud.speed = { current: 0, pause: 0, min: -0.2, mid: 0.4, max: 0.8 };\r\n        this.title = this.add.text(this.game.config.width * 0.5, this.game.config.height * 0.2, `LightTree${this.game.debug ? this.name.charAt(0) : \"\"}`, {\r\n            font: `${(this.game.device.os.desktop ? \"160\" : \"100\")}px '${this.game.font}'`,\r\n            fill: \"#FFF8EE\"\r\n        }).setOrigin(0.5);\r\n    }\r\n    update() {\r\n        if (this.ground.speed.current) {\r\n            this.ground.tilePositionX += this.ground.speed.current;\r\n        }\r\n        if (this.city.speed.current) {\r\n            this.city.tilePositionX += this.city.speed.current;\r\n        }\r\n        if (this.cloud.speed.current) {\r\n            this.cloud.tilePositionX += this.cloud.speed.current;\r\n        }\r\n    }\r\n    runSpace(object = [], speed = \"min\") {\r\n        if (!object.length) {\r\n            object = [\"ground\", \"city\", \"cloud\"];\r\n        }\r\n        for (let index in object) {\r\n            this[object[index]].speed.current = this[object[index]].speed[speed];\r\n        }\r\n    }\r\n    pauseSpace() {\r\n        this.ground.speed.current = this.ground.speed.pause;\r\n        this.city.speed.current = this.city.speed.pause;\r\n        this.cloud.speed.current = this.cloud.speed.pause;\r\n    }\r\n}\r\n\r\nmodule.exports = Scene;","const Scene = require(\"../scene\");\r\n\r\nclass Boot extends Scene {\r\n    constructor() {\r\n        super(\"Boot\");\r\n    }\r\n    init() {\r\n        super.init();\r\n    }\r\n    preload() {\r\n        super.preload();\r\n        this.load.image(\"ground\", \"data/ground.png\");\r\n        this.load.image(\"city\", \"data/city.png\");\r\n        this.load.image(\"cloud\", \"data/cloud.png\");\r\n    }\r\n    create() {\r\n        super.create();\r\n        //\r\n\r\n\r\n\r\n        setTimeout(() => {\r\n            this.scene.start(\"Play\");\r\n            // this.runSpace();\r\n\r\n        }, 3000);\r\n        // console.log(this.game.device.os.desktop);\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = Boot;","const Scene = require(\"../scene\");\r\n\r\nclass Play extends Scene {\r\n    constructor() {\r\n        super(\"Play\");\r\n    }\r\n    init() {\r\n        super.init();\r\n    }\r\n    preload() {\r\n        super.preload();\r\n    }\r\n    create() {\r\n        super.create();\r\n        this.runSpace([\"cloud\"]);\r\n    }\r\n}\r\n\r\nmodule.exports = Play;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYWN0aW9uLmpzIiwic3JjL2xpYi9nYW1lLmpzIiwic3JjL2xpYi9zY2VuZS5qcyIsInNyYy9saWIvc2NlbmVzL2Jvb3QuanMiLCJzcmMvbGliL3NjZW5lcy9wbGF5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBkZWJ1ZyA9IFwiQEBkZWJ1Z1wiO1xyXG5jb25zdCBmb250ID0gXCJDdXRlIEZvbnRcIjtcclxuY29uc3QgR2FtZSA9IHJlcXVpcmUoXCIuL2xpYi9nYW1lXCIpO1xyXG5cclxuV2ViRm9udC5sb2FkKHtcclxuICAgIGdvb2dsZToge1xyXG4gICAgICAgIGZhbWlsaWVzOiBbZm9udF1cclxuICAgIH0sXHJcbiAgICBhY3RpdmUoKSB7XHJcbiAgICAgICAgLy8gbmV3IGdhbWVcclxuICAgICAgICBjb25zdCBnYW1lT2JqZWN0ID0gbmV3IEdhbWUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCwgZm9udCwgZGVidWcpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8gbG9hZCBzY2VuZXNcclxuY29uc3QgQm9vdFNjZW5lID0gcmVxdWlyZShcIi4vc2NlbmVzL2Jvb3RcIik7XHJcbmNvbnN0IFBsYXlTY2VuZSA9IHJlcXVpcmUoXCIuL3NjZW5lcy9wbGF5XCIpO1xyXG5cclxuY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5HYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpZHRoID0gd2luZG93LmlubmVyV2lkdGgsIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCwgZm9udCwgZGVidWcgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmIChkZWJ1Zykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWUoXCJHYW1lXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIHJlbmRlcmVyOiBQaGFzZXIuQVVUTyxcclxuICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZjZjFkZVwiLFxyXG4gICAgICAgICAgICBwaXhlbEFydDogdHJ1ZSxcclxuICAgICAgICAgICAgcm91bmRQaXhlbHM6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9DZW50ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIGJhbm5lcjogZGVidWcsXHJcbiAgICAgICAgICAgIGRpc2FibGVDb250ZXh0TWVudTogIWRlYnVnLFxyXG4gICAgICAgICAgICBzY2FsZToge1xyXG4gICAgICAgICAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLlJFU0laRSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogXCJnYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY2VuZTogW1xyXG4gICAgICAgICAgICAgICAgQm9vdFNjZW5lLFxyXG4gICAgICAgICAgICAgICAgUGxheVNjZW5lXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZvbnQgPSBmb250O1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBkZWJ1ZztcclxuICAgIH1cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHN1cGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcclxuICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKFwiR2FtZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2FsZS5vbihcInJlc2l6ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNjZW5lTG9nKG5hbWUsIGxvZykge1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoYCVjU2NlbmUgTG9nIFske25hbWV9XWAsIFwiY29sb3I6IGdyZWVuO1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS50YWJsZShsb2cpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7IiwiY2xhc3MgU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5rZWVwTG9nID0gW107XHJcbiAgICB9XHJcbiAgICBsb2cobWVzc2FnZSA9IG51bGwsIHN5c3RlbSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5kZWJ1ZyAmJiBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMua2VlcExvZy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBieVN5c3RlbTogc3lzdGVtXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5rZWVwTG9nO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLmxvZyhcImluaXRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwicHJlbG9hZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmxvZyhcImNyZWF0ZVwiLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmdhbWUuc2NlbmVMb2codGhpcy5uYW1lLCB0aGlzLmtlZXBMb2cpO1xyXG4gICAgICAgIHRoaXMuZ3JvdW5kID0gdGhpcy5hZGQudGlsZVNwcml0ZSgtMiwgdGhpcy5nYW1lLmNvbmZpZy5oZWlnaHQgKyAyLCB0aGlzLmdhbWUuY29uZmlnLndpZHRoICsgNCwgdGhpcy5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjIsIFwiZ3JvdW5kXCIpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMSlcclxuICAgICAgICAgICAgLnNldFRpbGVTY2FsZSgodGhpcy5nYW1lLmRldmljZS5vcy5kZXNrdG9wID8gMSA6IDAuNikpXHJcbiAgICAgICAgICAgIC5zZXREZXB0aCgwKTtcclxuICAgICAgICB0aGlzLmdyb3VuZC5zcGVlZCA9IHsgY3VycmVudDogMCwgcGF1c2U6IDAsIG1pbjogMC40LCBtaWQ6IDAuOCwgbWF4OiAxIH07XHJcbiAgICAgICAgdGhpcy5jaXR5ID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCB0aGlzLmdhbWUuY29uZmlnLmhlaWdodCAqIDAuOCwgdGhpcy5nYW1lLmNvbmZpZy53aWR0aCwgMTA5LCBcImNpdHlcIilcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLCAxKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoMSk7XHJcbiAgICAgICAgdGhpcy5jaXR5LnNwZWVkID0geyBjdXJyZW50OiAwLCBwYXVzZTogMCwgbWluOiAwLjIsIG1pZDogMC40LCBtYXg6IDAuOCB9O1xyXG4gICAgICAgIHRoaXMuY2xvdWQgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIHRoaXMuZ2FtZS5jb25maWcuaGVpZ2h0ICogMC43LCB0aGlzLmdhbWUuY29uZmlnLndpZHRoLCAxMDUsIFwiY2xvdWRcIilcclxuICAgICAgICAgICAgLnNldE9yaWdpbigwLCAxKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoMik7XHJcbiAgICAgICAgdGhpcy5jbG91ZC5zcGVlZCA9IHsgY3VycmVudDogMCwgcGF1c2U6IDAsIG1pbjogLTAuMiwgbWlkOiAwLjQsIG1heDogMC44IH07XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuYWRkLnRleHQodGhpcy5nYW1lLmNvbmZpZy53aWR0aCAqIDAuNSwgdGhpcy5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjIsIGBMaWdodFRyZWUke3RoaXMuZ2FtZS5kZWJ1ZyA/IHRoaXMubmFtZS5jaGFyQXQoMCkgOiBcIlwifWAsIHtcclxuICAgICAgICAgICAgZm9udDogYCR7KHRoaXMuZ2FtZS5kZXZpY2Uub3MuZGVza3RvcCA/IFwiMTYwXCIgOiBcIjEwMFwiKX1weCAnJHt0aGlzLmdhbWUuZm9udH0nYCxcclxuICAgICAgICAgICAgZmlsbDogXCIjRkZGOEVFXCJcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ncm91bmQuc3BlZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VuZC50aWxlUG9zaXRpb25YICs9IHRoaXMuZ3JvdW5kLnNwZWVkLmN1cnJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNpdHkuc3BlZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNpdHkudGlsZVBvc2l0aW9uWCArPSB0aGlzLmNpdHkuc3BlZWQuY3VycmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY2xvdWQuc3BlZWQuY3VycmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3VkLnRpbGVQb3NpdGlvblggKz0gdGhpcy5jbG91ZC5zcGVlZC5jdXJyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJ1blNwYWNlKG9iamVjdCA9IFtdLCBzcGVlZCA9IFwibWluXCIpIHtcclxuICAgICAgICBpZiAoIW9iamVjdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgb2JqZWN0ID0gW1wiZ3JvdW5kXCIsIFwiY2l0eVwiLCBcImNsb3VkXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBvYmplY3QpIHtcclxuICAgICAgICAgICAgdGhpc1tvYmplY3RbaW5kZXhdXS5zcGVlZC5jdXJyZW50ID0gdGhpc1tvYmplY3RbaW5kZXhdXS5zcGVlZFtzcGVlZF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcGF1c2VTcGFjZSgpIHtcclxuICAgICAgICB0aGlzLmdyb3VuZC5zcGVlZC5jdXJyZW50ID0gdGhpcy5ncm91bmQuc3BlZWQucGF1c2U7XHJcbiAgICAgICAgdGhpcy5jaXR5LnNwZWVkLmN1cnJlbnQgPSB0aGlzLmNpdHkuc3BlZWQucGF1c2U7XHJcbiAgICAgICAgdGhpcy5jbG91ZC5zcGVlZC5jdXJyZW50ID0gdGhpcy5jbG91ZC5zcGVlZC5wYXVzZTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTY2VuZTsiLCJjb25zdCBTY2VuZSA9IHJlcXVpcmUoXCIuLi9zY2VuZVwiKTtcclxuXHJcbmNsYXNzIEJvb3QgZXh0ZW5kcyBTY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcIkJvb3RcIik7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHN1cGVyLmluaXQoKTtcclxuICAgIH1cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgc3VwZXIucHJlbG9hZCgpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImdyb3VuZFwiLCBcImRhdGEvZ3JvdW5kLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJjaXR5XCIsIFwiZGF0YS9jaXR5LnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJjbG91ZFwiLCBcImRhdGEvY2xvdWQucG5nXCIpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHN1cGVyLmNyZWF0ZSgpO1xyXG4gICAgICAgIC8vXHJcblxyXG5cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoXCJQbGF5XCIpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJ1blNwYWNlKCk7XHJcblxyXG4gICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2FtZS5kZXZpY2Uub3MuZGVza3RvcCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7IiwiY29uc3QgU2NlbmUgPSByZXF1aXJlKFwiLi4vc2NlbmVcIik7XHJcblxyXG5jbGFzcyBQbGF5IGV4dGVuZHMgU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJQbGF5XCIpO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIHN1cGVyLnByZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBzdXBlci5jcmVhdGUoKTtcclxuICAgICAgICB0aGlzLnJ1blNwYWNlKFtcImNsb3VkXCJdKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQbGF5OyJdfQ=="}