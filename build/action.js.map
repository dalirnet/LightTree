{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/action.js","src/lib/game.js","src/lib/gameObject/bench.js","src/lib/gameObject/lamp.js","src/lib/gameObject/platform.js","src/lib/gameObject/pole.js","src/lib/gameObject/tree.js","src/lib/scene.js","src/lib/scene/boot.js","src/lib/scene/play.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"action.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const debug = \"@@debug\";\r\nconst fontFamily = \"Cute Font\";\r\nconst Game = require(\"./lib/game\");\r\n\r\nWebFont.load({\r\n    google: {\r\n        families: [fontFamily]\r\n    },\r\n    active() {\r\n        const gameObject = new Game(fontFamily, debug);\r\n    }\r\n});\r\n","// load scenes\r\nconst BootScene = require(\"./scene/boot\");\r\nconst PlayScene = require(\"./scene/play\");\r\n\r\nclass Game extends Phaser.Game {\r\n    constructor(font, debug = false) {\r\n        if (debug) {\r\n            console.time(\"Game\");\r\n        }\r\n        super({\r\n            renderer: Phaser.AUTO,\r\n            antialias: true,\r\n            backgroundColor: \"#fcf1de\",\r\n            pixelArt: false,\r\n            roundPixels: true,\r\n            autoCenter: true,\r\n            banner: debug,\r\n            disableContextMenu: !debug,\r\n            scale: {\r\n                mode: Phaser.Scale.RESIZE,\r\n                parent: \"game\",\r\n                width: window.innerWidth,\r\n                height: window.innerHeight\r\n            },\r\n            scene: [\r\n                BootScene,\r\n                PlayScene\r\n            ]\r\n        });\r\n        this.font = font;\r\n        this.debug = debug;\r\n    }\r\n    start() {\r\n        super.start();\r\n        document.querySelector(\"#game canvas\").style.opacity = 1;\r\n        if (this.debug) {\r\n            console.timeEnd(\"Game\");\r\n        }\r\n        this.scale.on(\"resize\", () => {\r\n            document.querySelector(\"#game canvas\").style.opacity = 0;\r\n            window.location.reload();\r\n        });\r\n    }\r\n    sceneLog(name, log) {\r\n        if (this.debug) {\r\n            console.groupCollapsed(`%cScene Log [${name}]`, \"color: green;\");\r\n            console.table(log);\r\n            console.groupEnd();\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = Game;","class Bench extends Phaser.GameObjects.Sprite {\r\n    constructor(scene) {\r\n        super(scene, 0, scene.game.config.height * 0.8, \"bench\");\r\n        this.scene = scene;\r\n        this.setOrigin(0, 0.92)\r\n            .setScale(0.8)\r\n            .setDepth(4);\r\n        //\r\n        return this;\r\n    }\r\n    show() {\r\n        this.scene.add.existing(this);\r\n        return this;\r\n    }\r\n}\r\n\r\nmodule.exports = Bench;","class Lamp extends Phaser.GameObjects.Sprite {\r\n    constructor(scene, count = 2, status = false, flip = false) {\r\n        super(scene, 0, scene.game.config.height * 0.8, `lamp-${count}-${(status == true ? \"on\" : \"off\")}`);\r\n        this.scene = scene;\r\n        this.gameCheck = true;\r\n        this.gameStatus = status;\r\n        this.setOrigin(0, 0.98)\r\n            .setScale(0.8)\r\n            .setDepth(4)\r\n            .setFlipX(flip)\r\n            .setInteractive()\r\n            .on(\"pointerdown\", () => {\r\n                this.gameStatus = !this.gameStatus;\r\n                this.setTexture(`lamp-${count}-${(this.gameStatus ? \"on\" : \"off\")}`);\r\n            }, this);\r\n        //\r\n        return this;\r\n    }\r\n    show() {\r\n        this.scene.add.existing(this);\r\n        return this;\r\n    }\r\n}\r\n\r\nmodule.exports = Lamp;","const TreeSprite = require(\"./tree\");\r\nconst PoleSprite = require(\"./pole\");\r\nconst BenchSprite = require(\"./bench\");\r\nconst LampSprite = require(\"./lamp\");\r\n\r\nclass Platform extends Phaser.GameObjects.Container {\r\n    constructor(scene) {\r\n        super(scene, 0, 0);\r\n        this.scene = scene;\r\n        this.level = {\r\n            score: 0\r\n        };\r\n        this.scope = {\r\n            available: \"three\",\r\n            one: {\r\n                status: \"active\",\r\n                keep: 20,\r\n                el: this.scene.add.container(this.scene.game.config.width * 0.5, 0)\r\n            },\r\n            two: {\r\n                status: \"active\",\r\n                keep: 20,\r\n                el: this.scene.add.container(this.scene.game.config.width * 1.5, 0)\r\n            },\r\n            three: {\r\n                status: \"pause\",\r\n                keep: 20,\r\n                el: this.scene.add.container(this.scene.game.config.width, 0)\r\n            },\r\n        };\r\n        this.area(this.scope.one.el, 0xff0000);\r\n        this.area(this.scope.two.el, 0x00ff00);\r\n        this.area(this.scope.three.el, 0x0000ff);\r\n        // add title\r\n        this.title = this.scene.add.text(this.scene.game.config.width * 0.5, this.scene.game.config.height * 0.15, \"\", {\r\n            font: `${(this.scene.game.device.os.desktop ? \"160\" : \"100\")}px '${this.scene.game.font}'`,\r\n            fill: \"#FFF8EE\"\r\n        }).setText(`LightTree${this.scene.game.debug ? this.scene.name.charAt(0) : \"\"}`).setOrigin(0.5);\r\n        this.add([this.title, this.scope.one.el, this.scope.two.el, this.scope.three.el]).setDepth(10);\r\n        // set limit\r\n        this.limit = this.scene.game.config.width * -1;\r\n        this.scene.add.existing(this);\r\n        this.addContent(this.scope.one);\r\n    }\r\n    addContent(scope) {\r\n        do {\r\n            let space = Phaser.Math.Between(20, this.scene.game.config.width * 0.1);\r\n\r\n            // let lightCount = Phaser.Math.Between(0, 4);\r\n            // let tree = new TreeSprite(this.scene, Phaser.Math.Between(1, 6), lightCount).show().setX(scope.keep + space);\r\n            // scope.el.add(tree);\r\n            // scope.keep += tree.width + space;\r\n\r\n            // let pole = new PoleSprite(this.scene).show().setX(scope.keep + space);\r\n            // scope.el.add(pole);\r\n            // scope.keep += pole.displayWidth + space;\r\n\r\n            // let bench = new BenchSprite(this.scene).show().setX(scope.keep + space);\r\n            // scope.el.add(bench);\r\n            // scope.keep += bench.displayWidth + space;\r\n\r\n            let lamp = new LampSprite(this.scene, 1, false, false).show().setX(scope.keep + space);\r\n            scope.el.add(lamp);\r\n            scope.keep += lamp.displayWidth + space;\r\n\r\n        }\r\n        while (scope.keep <= scope.el.width * 0.8);\r\n    }\r\n    removeContent(scope) {\r\n        scope.status = \"pause\";\r\n        scope.el.x = Math.abs(this.limit);\r\n        scope.el.each((child) => {\r\n            if (child.gameCheck) {\r\n                console.log(child);\r\n            }\r\n            // child.destroy();\r\n        });\r\n        scope.el.removeAll(true);\r\n    }\r\n    run(speed = 0) {\r\n        if (speed) {\r\n            this.level.score += speed;\r\n            if (this.scope.one.status == \"active\") {\r\n                this.scope.one.el.x -= speed;\r\n                if (this.scope.one.el.x <= this.limit) {\r\n                    this.removeContent(this.scope.one);\r\n                    this.scope.available = \"one\";\r\n                    this.scope.three.status = \"active\";\r\n                }\r\n            }\r\n            if (this.scope.two.status == \"active\") {\r\n                this.scope.two.el.x -= speed;\r\n                if (this.scope.two.el.x <= this.limit) {\r\n                    this.removeContent(this.scope.two);\r\n                    this.scope.available = \"two\";\r\n                    this.scope.one.status = \"active\";\r\n                }\r\n            }\r\n            if (this.scope.three.status == \"active\") {\r\n                this.scope.three.el.x -= speed;\r\n                if (this.scope.three.el.x <= this.limit) {\r\n                    this.removeContent(this.scope.three);\r\n                    this.scope.available = \"three\";\r\n                    this.scope.two.status = \"active\";\r\n                    // test\r\n                    this.scene.pauseSpace();\r\n                }\r\n            }\r\n            this.title.setText(Math.round(this.level.score).toString().padStart(6, \"0\"));\r\n        }\r\n    }\r\n    area(scope, color) {\r\n        scope.setSize(this.scene.game.config.width - 40, (this.scene.game.config.height * 0.8) - 40)\r\n        let area = this.scene.add.graphics(0, 0)\r\n            .fillStyle(color, 0.05)\r\n            .fillRect(20, 20, scope.width, scope.height);\r\n        scope.add(area);\r\n        return this;\r\n    }\r\n}\r\n\r\nmodule.exports = Platform;","class Pole extends Phaser.GameObjects.Sprite {\r\n    constructor(scene, type = \"\") {\r\n        super(scene, 0, scene.game.config.height * 0.8, `pole${type}`);\r\n        this.scene = scene;\r\n        this.setOrigin(0, 0.98)\r\n            .setScale(0.8)\r\n            .setDepth(4);\r\n        //\r\n        return this;\r\n    }\r\n    show() {\r\n        this.scene.add.existing(this);\r\n        return this;\r\n    }\r\n}\r\n\r\nmodule.exports = Pole;","class Tree extends Phaser.GameObjects.Container {\r\n    constructor(scene, type = \"1\", lightCount = 0) {\r\n        super(scene, 0, scene.game.config.height * 0.8);\r\n        this.scene = scene;\r\n        let tree = this.scene.add.sprite(0, 0, `tree${type}`)\r\n            .setScale(0.7)\r\n            .setOrigin(0, 0.92);\r\n        this.add(tree);\r\n        if (lightCount < 0 || lightCount > 4) {\r\n            lightCount = 0;\r\n        }\r\n        if (lightCount) {\r\n            let count = {\r\n                w: 200,\r\n                h: 230\r\n            };\r\n            switch (lightCount) {\r\n                case 2: {\r\n                    count.w *= 2;\r\n                    break;\r\n                }\r\n                case 3: {\r\n                    count.w *= 3;\r\n                    break;\r\n                }\r\n                case 4: {\r\n                    count.w *= 2;\r\n                    count.h *= 2;\r\n                    break;\r\n                }\r\n            }\r\n            let light = this.scene.add.tileSprite(tree.displayWidth / 2, (tree.displayHeight * -1), count.w, count.h, \"light\")\r\n                .setScale(0.13)\r\n                .setOrigin(0.5, 1);\r\n            this.add(light);\r\n        }\r\n        this.setDepth(4).setSize(tree.displayWidth, tree.displayHeight);\r\n        //\r\n        return this;\r\n    }\r\n    show() {\r\n        this.scene.add.existing(this);\r\n        return this;\r\n    }\r\n}\r\n\r\nmodule.exports = Tree;","const Platform = require(\"./gameObject/platform\");\r\n\r\nclass Scene extends Phaser.Scene {\r\n    constructor(name) {\r\n        super(name);\r\n        this.name = name;\r\n        this.keepLog = [];\r\n    }\r\n    log(message = null, system = false) {\r\n        if (this.game.debug && message) {\r\n            this.keepLog.push({\r\n                message,\r\n                bySystem: system\r\n            });\r\n        }\r\n        return this.keepLog;\r\n    }\r\n    init() {\r\n        this.log(\"init\", true);\r\n    }\r\n    preload() {\r\n        this.log(\"preload\", true);\r\n    }\r\n    create() {\r\n        this.ground = this.add.tileSprite(-2, this.game.config.height + 2, this.game.config.width + 4, this.game.config.height * 0.2, \"ground\")\r\n            .setOrigin(0, 1)\r\n            .setTileScale((this.game.device.os.desktop ? 1 : 0.6))\r\n            .setDepth(0);\r\n        this.ground.speed = { current: 0, pause: 0, min: 0.4, mid: 0.8, max: 1 };\r\n        this.city = this.add.tileSprite(0, this.game.config.height * 0.8, this.game.config.width, 109, \"city\")\r\n            .setOrigin(0, 1)\r\n            .setDepth(1);\r\n        this.city.speed = { current: 0, pause: 0, min: 0.1, mid: 0.3, max: 0.6 };\r\n        this.cloud = this.add.tileSprite(0, this.game.config.height * 0.7, this.game.config.width, 105, \"cloud\")\r\n            .setOrigin(0, 1)\r\n            .setDepth(2);\r\n        this.cloud.speed = { current: 0, pause: 0, min: -0.2, mid: 0.4, max: 0.8 };\r\n        // load platform\r\n        if (this.name == \"Play\") {\r\n            this.platform = new Platform(this);\r\n        }\r\n        // end of scene\r\n        this.log(\"create\", true);\r\n        this.game.sceneLog(this.name, this.keepLog);\r\n    }\r\n    update() {\r\n        if (this.ground.speed.current) {\r\n            if (this.name == \"Play\") {\r\n                this.platform.run(this.ground.speed.current);\r\n            }\r\n            this.ground.tilePositionX += (this.game.device.os.desktop ? this.ground.speed.current : this.ground.speed.current * 1.6);\r\n            if (this.city.speed.current) {\r\n                this.city.tilePositionX += this.city.speed.current;\r\n            }\r\n        }\r\n        if (this.cloud.speed.current) {\r\n            this.cloud.tilePositionX += this.cloud.speed.current;\r\n        }\r\n    }\r\n    runSpace(speed = \"min\", object = []) {\r\n        if (!object.length) {\r\n            object = [\"ground\", \"city\", \"cloud\"];\r\n        }\r\n        for (let index in object) {\r\n            this[object[index]].speed.current = this[object[index]].speed[speed];\r\n        }\r\n    }\r\n    pauseSpace() {\r\n        this.ground.speed.current = this.ground.speed.pause;\r\n        this.city.speed.current = this.city.speed.pause;\r\n        this.cloud.speed.current = this.cloud.speed.pause;\r\n    }\r\n}\r\n\r\nmodule.exports = Scene;","const Scene = require(\"../scene\");\r\n\r\nclass Boot extends Scene {\r\n    constructor() {\r\n        super(\"Boot\");\r\n    }\r\n    init() {\r\n        super.init();\r\n    }\r\n    preload() {\r\n        super.preload();\r\n        this.load.image(\"ground\", \"data/ground.png\");\r\n        this.load.image(\"city\", \"data/city.png\");\r\n        this.load.image(\"cloud\", \"data/cloud.png\");\r\n        //\r\n        this.load.image(\"tree1\", \"data/tree1.png\");\r\n        this.load.image(\"tree2\", \"data/tree2.png\");\r\n        this.load.image(\"tree3\", \"data/tree3.png\");\r\n        this.load.image(\"tree4\", \"data/tree4.png\");\r\n        this.load.image(\"tree5\", \"data/tree5.png\");\r\n        this.load.image(\"tree6\", \"data/tree6.png\");\r\n        //\r\n        this.load.image(\"light\", \"data/light.png\");\r\n        this.load.image(\"bench\", \"data/bench.png\");\r\n        //\r\n        this.load.image(\"pole\", \"data/pole.png\");\r\n        this.load.image(\"pole-1\", \"data/pole-1.png\");\r\n        this.load.image(\"pole-2\", \"data/pole-2.png\");\r\n        this.load.image(\"pole+1\", \"data/pole+1.png\");\r\n        this.load.image(\"pole+2\", \"data/pole+2.png\");\r\n        //\r\n        this.load.image(\"lamp-1-on\", \"data/lamp-1-on.png\");\r\n        this.load.image(\"lamp-1-off\", \"data/lamp-1-off.png\");\r\n        this.load.image(\"lamp-2-on\", \"data/lamp-2-on.png\");\r\n        this.load.image(\"lamp-2-off\", \"data/lamp-2-off.png\");\r\n    }\r\n    create() {\r\n        super.create();\r\n        this.scene.start(\"Play\");\r\n        //\r\n        // setTimeout(() => {\r\n        // }, 2000);\r\n    }\r\n}\r\n\r\nmodule.exports = Boot;","const Scene = require(\"../scene\");\r\n\r\nclass Play extends Scene {\r\n    constructor() {\r\n        super(\"Play\");\r\n    }\r\n    init() {\r\n        super.init();\r\n    }\r\n    preload() {\r\n        super.preload();\r\n    }\r\n    create() {\r\n        super.create();\r\n        this.runSpace(\"max\");\r\n        // setTimeout(() => {\r\n        //     this.pauseSpace();\r\n        // }, 6000);\r\n    }\r\n}\r\n\r\nmodule.exports = Play;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYWN0aW9uLmpzIiwic3JjL2xpYi9nYW1lLmpzIiwic3JjL2xpYi9nYW1lT2JqZWN0L2JlbmNoLmpzIiwic3JjL2xpYi9nYW1lT2JqZWN0L2xhbXAuanMiLCJzcmMvbGliL2dhbWVPYmplY3QvcGxhdGZvcm0uanMiLCJzcmMvbGliL2dhbWVPYmplY3QvcG9sZS5qcyIsInNyYy9saWIvZ2FtZU9iamVjdC90cmVlLmpzIiwic3JjL2xpYi9zY2VuZS5qcyIsInNyYy9saWIvc2NlbmUvYm9vdC5qcyIsInNyYy9saWIvc2NlbmUvcGxheS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGRlYnVnID0gXCJAQGRlYnVnXCI7XHJcbmNvbnN0IGZvbnRGYW1pbHkgPSBcIkN1dGUgRm9udFwiO1xyXG5jb25zdCBHYW1lID0gcmVxdWlyZShcIi4vbGliL2dhbWVcIik7XHJcblxyXG5XZWJGb250LmxvYWQoe1xyXG4gICAgZ29vZ2xlOiB7XHJcbiAgICAgICAgZmFtaWxpZXM6IFtmb250RmFtaWx5XVxyXG4gICAgfSxcclxuICAgIGFjdGl2ZSgpIHtcclxuICAgICAgICBjb25zdCBnYW1lT2JqZWN0ID0gbmV3IEdhbWUoZm9udEZhbWlseSwgZGVidWcpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8gbG9hZCBzY2VuZXNcclxuY29uc3QgQm9vdFNjZW5lID0gcmVxdWlyZShcIi4vc2NlbmUvYm9vdFwiKTtcclxuY29uc3QgUGxheVNjZW5lID0gcmVxdWlyZShcIi4vc2NlbmUvcGxheVwiKTtcclxuXHJcbmNsYXNzIEdhbWUgZXh0ZW5kcyBQaGFzZXIuR2FtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb250LCBkZWJ1ZyA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKGRlYnVnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUudGltZShcIkdhbWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgcmVuZGVyZXI6IFBoYXNlci5BVVRPLFxyXG4gICAgICAgICAgICBhbnRpYWxpYXM6IHRydWUsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmNmMWRlXCIsXHJcbiAgICAgICAgICAgIHBpeGVsQXJ0OiBmYWxzZSxcclxuICAgICAgICAgICAgcm91bmRQaXhlbHM6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9DZW50ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIGJhbm5lcjogZGVidWcsXHJcbiAgICAgICAgICAgIGRpc2FibGVDb250ZXh0TWVudTogIWRlYnVnLFxyXG4gICAgICAgICAgICBzY2FsZToge1xyXG4gICAgICAgICAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLlJFU0laRSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogXCJnYW1lXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY2VuZTogW1xyXG4gICAgICAgICAgICAgICAgQm9vdFNjZW5lLFxyXG4gICAgICAgICAgICAgICAgUGxheVNjZW5lXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZvbnQgPSBmb250O1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBkZWJ1ZztcclxuICAgIH1cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHN1cGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lIGNhbnZhc1wiKS5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xyXG4gICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoXCJHYW1lXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjYWxlLm9uKFwicmVzaXplXCIsICgpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lIGNhbnZhc1wiKS5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2NlbmVMb2cobmFtZSwgbG9nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZChgJWNTY2VuZSBMb2cgWyR7bmFtZX1dYCwgXCJjb2xvcjogZ3JlZW47XCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLnRhYmxlKGxvZyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZTsiLCJjbGFzcyBCZW5jaCBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgMCwgc2NlbmUuZ2FtZS5jb25maWcuaGVpZ2h0ICogMC44LCBcImJlbmNoXCIpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLnNldE9yaWdpbigwLCAwLjkyKVxyXG4gICAgICAgICAgICAuc2V0U2NhbGUoMC44KVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoNCk7XHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmVuY2g7IiwiY2xhc3MgTGFtcCBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUsIGNvdW50ID0gMiwgc3RhdHVzID0gZmFsc2UsIGZsaXAgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCAwLCBzY2VuZS5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjgsIGBsYW1wLSR7Y291bnR9LSR7KHN0YXR1cyA9PSB0cnVlID8gXCJvblwiIDogXCJvZmZcIil9YCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMuZ2FtZUNoZWNrID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zZXRPcmlnaW4oMCwgMC45OClcclxuICAgICAgICAgICAgLnNldFNjYWxlKDAuOClcclxuICAgICAgICAgICAgLnNldERlcHRoKDQpXHJcbiAgICAgICAgICAgIC5zZXRGbGlwWChmbGlwKVxyXG4gICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoKVxyXG4gICAgICAgICAgICAub24oXCJwb2ludGVyZG93blwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVTdGF0dXMgPSAhdGhpcy5nYW1lU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0dXJlKGBsYW1wLSR7Y291bnR9LSR7KHRoaXMuZ2FtZVN0YXR1cyA/IFwib25cIiA6IFwib2ZmXCIpfWApO1xyXG4gICAgICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMYW1wOyIsImNvbnN0IFRyZWVTcHJpdGUgPSByZXF1aXJlKFwiLi90cmVlXCIpO1xyXG5jb25zdCBQb2xlU3ByaXRlID0gcmVxdWlyZShcIi4vcG9sZVwiKTtcclxuY29uc3QgQmVuY2hTcHJpdGUgPSByZXF1aXJlKFwiLi9iZW5jaFwiKTtcclxuY29uc3QgTGFtcFNwcml0ZSA9IHJlcXVpcmUoXCIuL2xhbXBcIik7XHJcblxyXG5jbGFzcyBQbGF0Zm9ybSBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgIHRoaXMubGV2ZWwgPSB7XHJcbiAgICAgICAgICAgIHNjb3JlOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNjb3BlID0ge1xyXG4gICAgICAgICAgICBhdmFpbGFibGU6IFwidGhyZWVcIixcclxuICAgICAgICAgICAgb25lOiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICBrZWVwOiAyMCxcclxuICAgICAgICAgICAgICAgIGVsOiB0aGlzLnNjZW5lLmFkZC5jb250YWluZXIodGhpcy5zY2VuZS5nYW1lLmNvbmZpZy53aWR0aCAqIDAuNSwgMClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHdvOiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiYWN0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICBrZWVwOiAyMCxcclxuICAgICAgICAgICAgICAgIGVsOiB0aGlzLnNjZW5lLmFkZC5jb250YWluZXIodGhpcy5zY2VuZS5nYW1lLmNvbmZpZy53aWR0aCAqIDEuNSwgMClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhyZWU6IHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogXCJwYXVzZVwiLFxyXG4gICAgICAgICAgICAgICAga2VlcDogMjAsXHJcbiAgICAgICAgICAgICAgICBlbDogdGhpcy5zY2VuZS5hZGQuY29udGFpbmVyKHRoaXMuc2NlbmUuZ2FtZS5jb25maWcud2lkdGgsIDApXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFyZWEodGhpcy5zY29wZS5vbmUuZWwsIDB4ZmYwMDAwKTtcclxuICAgICAgICB0aGlzLmFyZWEodGhpcy5zY29wZS50d28uZWwsIDB4MDBmZjAwKTtcclxuICAgICAgICB0aGlzLmFyZWEodGhpcy5zY29wZS50aHJlZS5lbCwgMHgwMDAwZmYpO1xyXG4gICAgICAgIC8vIGFkZCB0aXRsZVxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLnNjZW5lLmFkZC50ZXh0KHRoaXMuc2NlbmUuZ2FtZS5jb25maWcud2lkdGggKiAwLjUsIHRoaXMuc2NlbmUuZ2FtZS5jb25maWcuaGVpZ2h0ICogMC4xNSwgXCJcIiwge1xyXG4gICAgICAgICAgICBmb250OiBgJHsodGhpcy5zY2VuZS5nYW1lLmRldmljZS5vcy5kZXNrdG9wID8gXCIxNjBcIiA6IFwiMTAwXCIpfXB4ICcke3RoaXMuc2NlbmUuZ2FtZS5mb250fSdgLFxyXG4gICAgICAgICAgICBmaWxsOiBcIiNGRkY4RUVcIlxyXG4gICAgICAgIH0pLnNldFRleHQoYExpZ2h0VHJlZSR7dGhpcy5zY2VuZS5nYW1lLmRlYnVnID8gdGhpcy5zY2VuZS5uYW1lLmNoYXJBdCgwKSA6IFwiXCJ9YCkuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMudGl0bGUsIHRoaXMuc2NvcGUub25lLmVsLCB0aGlzLnNjb3BlLnR3by5lbCwgdGhpcy5zY29wZS50aHJlZS5lbF0pLnNldERlcHRoKDEwKTtcclxuICAgICAgICAvLyBzZXQgbGltaXRcclxuICAgICAgICB0aGlzLmxpbWl0ID0gdGhpcy5zY2VuZS5nYW1lLmNvbmZpZy53aWR0aCAqIC0xO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYWRkQ29udGVudCh0aGlzLnNjb3BlLm9uZSk7XHJcbiAgICB9XHJcbiAgICBhZGRDb250ZW50KHNjb3BlKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBsZXQgc3BhY2UgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDIwLCB0aGlzLnNjZW5lLmdhbWUuY29uZmlnLndpZHRoICogMC4xKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxldCBsaWdodENvdW50ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCA0KTtcclxuICAgICAgICAgICAgLy8gbGV0IHRyZWUgPSBuZXcgVHJlZVNwcml0ZSh0aGlzLnNjZW5lLCBQaGFzZXIuTWF0aC5CZXR3ZWVuKDEsIDYpLCBsaWdodENvdW50KS5zaG93KCkuc2V0WChzY29wZS5rZWVwICsgc3BhY2UpO1xyXG4gICAgICAgICAgICAvLyBzY29wZS5lbC5hZGQodHJlZSk7XHJcbiAgICAgICAgICAgIC8vIHNjb3BlLmtlZXAgKz0gdHJlZS53aWR0aCArIHNwYWNlO1xyXG5cclxuICAgICAgICAgICAgLy8gbGV0IHBvbGUgPSBuZXcgUG9sZVNwcml0ZSh0aGlzLnNjZW5lKS5zaG93KCkuc2V0WChzY29wZS5rZWVwICsgc3BhY2UpO1xyXG4gICAgICAgICAgICAvLyBzY29wZS5lbC5hZGQocG9sZSk7XHJcbiAgICAgICAgICAgIC8vIHNjb3BlLmtlZXAgKz0gcG9sZS5kaXNwbGF5V2lkdGggKyBzcGFjZTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxldCBiZW5jaCA9IG5ldyBCZW5jaFNwcml0ZSh0aGlzLnNjZW5lKS5zaG93KCkuc2V0WChzY29wZS5rZWVwICsgc3BhY2UpO1xyXG4gICAgICAgICAgICAvLyBzY29wZS5lbC5hZGQoYmVuY2gpO1xyXG4gICAgICAgICAgICAvLyBzY29wZS5rZWVwICs9IGJlbmNoLmRpc3BsYXlXaWR0aCArIHNwYWNlO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxhbXAgPSBuZXcgTGFtcFNwcml0ZSh0aGlzLnNjZW5lLCAxLCBmYWxzZSwgZmFsc2UpLnNob3coKS5zZXRYKHNjb3BlLmtlZXAgKyBzcGFjZSk7XHJcbiAgICAgICAgICAgIHNjb3BlLmVsLmFkZChsYW1wKTtcclxuICAgICAgICAgICAgc2NvcGUua2VlcCArPSBsYW1wLmRpc3BsYXlXaWR0aCArIHNwYWNlO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKHNjb3BlLmtlZXAgPD0gc2NvcGUuZWwud2lkdGggKiAwLjgpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQ29udGVudChzY29wZSkge1xyXG4gICAgICAgIHNjb3BlLnN0YXR1cyA9IFwicGF1c2VcIjtcclxuICAgICAgICBzY29wZS5lbC54ID0gTWF0aC5hYnModGhpcy5saW1pdCk7XHJcbiAgICAgICAgc2NvcGUuZWwuZWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkLmdhbWVDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNoaWxkLmRlc3Ryb3koKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzY29wZS5lbC5yZW1vdmVBbGwodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBydW4oc3BlZWQgPSAwKSB7XHJcbiAgICAgICAgaWYgKHNwZWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWwuc2NvcmUgKz0gc3BlZWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlLm9uZS5zdGF0dXMgPT0gXCJhY3RpdmVcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29wZS5vbmUuZWwueCAtPSBzcGVlZDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlLm9uZS5lbC54IDw9IHRoaXMubGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbnRlbnQodGhpcy5zY29wZS5vbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGUuYXZhaWxhYmxlID0gXCJvbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3BlLnRocmVlLnN0YXR1cyA9IFwiYWN0aXZlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2NvcGUudHdvLnN0YXR1cyA9PSBcImFjdGl2ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlLnR3by5lbC54IC09IHNwZWVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2NvcGUudHdvLmVsLnggPD0gdGhpcy5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29udGVudCh0aGlzLnNjb3BlLnR3byk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29wZS5hdmFpbGFibGUgPSBcInR3b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGUub25lLnN0YXR1cyA9IFwiYWN0aXZlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2NvcGUudGhyZWUuc3RhdHVzID09IFwiYWN0aXZlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcGUudGhyZWUuZWwueCAtPSBzcGVlZDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlLnRocmVlLmVsLnggPD0gdGhpcy5saW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29udGVudCh0aGlzLnNjb3BlLnRocmVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3BlLmF2YWlsYWJsZSA9IFwidGhyZWVcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3BlLnR3by5zdGF0dXMgPSBcImFjdGl2ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRlc3RcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnBhdXNlU3BhY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRpdGxlLnNldFRleHQoTWF0aC5yb3VuZCh0aGlzLmxldmVsLnNjb3JlKS50b1N0cmluZygpLnBhZFN0YXJ0KDYsIFwiMFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXJlYShzY29wZSwgY29sb3IpIHtcclxuICAgICAgICBzY29wZS5zZXRTaXplKHRoaXMuc2NlbmUuZ2FtZS5jb25maWcud2lkdGggLSA0MCwgKHRoaXMuc2NlbmUuZ2FtZS5jb25maWcuaGVpZ2h0ICogMC44KSAtIDQwKVxyXG4gICAgICAgIGxldCBhcmVhID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoMCwgMClcclxuICAgICAgICAgICAgLmZpbGxTdHlsZShjb2xvciwgMC4wNSlcclxuICAgICAgICAgICAgLmZpbGxSZWN0KDIwLCAyMCwgc2NvcGUud2lkdGgsIHNjb3BlLmhlaWdodCk7XHJcbiAgICAgICAgc2NvcGUuYWRkKGFyZWEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBsYXRmb3JtOyIsImNsYXNzIFBvbGUgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCB0eXBlID0gXCJcIikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCAwLCBzY2VuZS5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjgsIGBwb2xlJHt0eXBlfWApO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLnNldE9yaWdpbigwLCAwLjk4KVxyXG4gICAgICAgICAgICAuc2V0U2NhbGUoMC44KVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoNCk7XHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9sZTsiLCJjbGFzcyBUcmVlIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgdHlwZSA9IFwiMVwiLCBsaWdodENvdW50ID0gMCkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCAwLCBzY2VuZS5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICBsZXQgdHJlZSA9IHRoaXMuc2NlbmUuYWRkLnNwcml0ZSgwLCAwLCBgdHJlZSR7dHlwZX1gKVxyXG4gICAgICAgICAgICAuc2V0U2NhbGUoMC43KVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDAuOTIpO1xyXG4gICAgICAgIHRoaXMuYWRkKHRyZWUpO1xyXG4gICAgICAgIGlmIChsaWdodENvdW50IDwgMCB8fCBsaWdodENvdW50ID4gNCkge1xyXG4gICAgICAgICAgICBsaWdodENvdW50ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpZ2h0Q291bnQpIHtcclxuICAgICAgICAgICAgbGV0IGNvdW50ID0ge1xyXG4gICAgICAgICAgICAgICAgdzogMjAwLFxyXG4gICAgICAgICAgICAgICAgaDogMjMwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHN3aXRjaCAobGlnaHRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQudyAqPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQudyAqPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQudyAqPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50LmggKj0gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgbGlnaHQgPSB0aGlzLnNjZW5lLmFkZC50aWxlU3ByaXRlKHRyZWUuZGlzcGxheVdpZHRoIC8gMiwgKHRyZWUuZGlzcGxheUhlaWdodCAqIC0xKSwgY291bnQudywgY291bnQuaCwgXCJsaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldFNjYWxlKDAuMTMpXHJcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkKGxpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXREZXB0aCg0KS5zZXRTaXplKHRyZWUuZGlzcGxheVdpZHRoLCB0cmVlLmRpc3BsYXlIZWlnaHQpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRyZWU7IiwiY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKFwiLi9nYW1lT2JqZWN0L3BsYXRmb3JtXCIpO1xyXG5cclxuY2xhc3MgU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5rZWVwTG9nID0gW107XHJcbiAgICB9XHJcbiAgICBsb2cobWVzc2FnZSA9IG51bGwsIHN5c3RlbSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5kZWJ1ZyAmJiBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMua2VlcExvZy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBieVN5c3RlbTogc3lzdGVtXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5rZWVwTG9nO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLmxvZyhcImluaXRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIHRoaXMubG9nKFwicHJlbG9hZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmdyb3VuZCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoLTIsIHRoaXMuZ2FtZS5jb25maWcuaGVpZ2h0ICsgMiwgdGhpcy5nYW1lLmNvbmZpZy53aWR0aCArIDQsIHRoaXMuZ2FtZS5jb25maWcuaGVpZ2h0ICogMC4yLCBcImdyb3VuZFwiKVxyXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDEpXHJcbiAgICAgICAgICAgIC5zZXRUaWxlU2NhbGUoKHRoaXMuZ2FtZS5kZXZpY2Uub3MuZGVza3RvcCA/IDEgOiAwLjYpKVxyXG4gICAgICAgICAgICAuc2V0RGVwdGgoMCk7XHJcbiAgICAgICAgdGhpcy5ncm91bmQuc3BlZWQgPSB7IGN1cnJlbnQ6IDAsIHBhdXNlOiAwLCBtaW46IDAuNCwgbWlkOiAwLjgsIG1heDogMSB9O1xyXG4gICAgICAgIHRoaXMuY2l0eSA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgdGhpcy5nYW1lLmNvbmZpZy5oZWlnaHQgKiAwLjgsIHRoaXMuZ2FtZS5jb25maWcud2lkdGgsIDEwOSwgXCJjaXR5XCIpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMSlcclxuICAgICAgICAgICAgLnNldERlcHRoKDEpO1xyXG4gICAgICAgIHRoaXMuY2l0eS5zcGVlZCA9IHsgY3VycmVudDogMCwgcGF1c2U6IDAsIG1pbjogMC4xLCBtaWQ6IDAuMywgbWF4OiAwLjYgfTtcclxuICAgICAgICB0aGlzLmNsb3VkID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCB0aGlzLmdhbWUuY29uZmlnLmhlaWdodCAqIDAuNywgdGhpcy5nYW1lLmNvbmZpZy53aWR0aCwgMTA1LCBcImNsb3VkXCIpXHJcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMSlcclxuICAgICAgICAgICAgLnNldERlcHRoKDIpO1xyXG4gICAgICAgIHRoaXMuY2xvdWQuc3BlZWQgPSB7IGN1cnJlbnQ6IDAsIHBhdXNlOiAwLCBtaW46IC0wLjIsIG1pZDogMC40LCBtYXg6IDAuOCB9O1xyXG4gICAgICAgIC8vIGxvYWQgcGxhdGZvcm1cclxuICAgICAgICBpZiAodGhpcy5uYW1lID09IFwiUGxheVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhdGZvcm0gPSBuZXcgUGxhdGZvcm0odGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGVuZCBvZiBzY2VuZVxyXG4gICAgICAgIHRoaXMubG9nKFwiY3JlYXRlXCIsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zY2VuZUxvZyh0aGlzLm5hbWUsIHRoaXMua2VlcExvZyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3JvdW5kLnNwZWVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSBcIlBsYXlcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybS5ydW4odGhpcy5ncm91bmQuc3BlZWQuY3VycmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ncm91bmQudGlsZVBvc2l0aW9uWCArPSAodGhpcy5nYW1lLmRldmljZS5vcy5kZXNrdG9wID8gdGhpcy5ncm91bmQuc3BlZWQuY3VycmVudCA6IHRoaXMuZ3JvdW5kLnNwZWVkLmN1cnJlbnQgKiAxLjYpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaXR5LnNwZWVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2l0eS50aWxlUG9zaXRpb25YICs9IHRoaXMuY2l0eS5zcGVlZC5jdXJyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNsb3VkLnNwZWVkLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG91ZC50aWxlUG9zaXRpb25YICs9IHRoaXMuY2xvdWQuc3BlZWQuY3VycmVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBydW5TcGFjZShzcGVlZCA9IFwibWluXCIsIG9iamVjdCA9IFtdKSB7XHJcbiAgICAgICAgaWYgKCFvYmplY3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIG9iamVjdCA9IFtcImdyb3VuZFwiLCBcImNpdHlcIiwgXCJjbG91ZFwiXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggaW4gb2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXNbb2JqZWN0W2luZGV4XV0uc3BlZWQuY3VycmVudCA9IHRoaXNbb2JqZWN0W2luZGV4XV0uc3BlZWRbc3BlZWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHBhdXNlU3BhY2UoKSB7XHJcbiAgICAgICAgdGhpcy5ncm91bmQuc3BlZWQuY3VycmVudCA9IHRoaXMuZ3JvdW5kLnNwZWVkLnBhdXNlO1xyXG4gICAgICAgIHRoaXMuY2l0eS5zcGVlZC5jdXJyZW50ID0gdGhpcy5jaXR5LnNwZWVkLnBhdXNlO1xyXG4gICAgICAgIHRoaXMuY2xvdWQuc3BlZWQuY3VycmVudCA9IHRoaXMuY2xvdWQuc3BlZWQucGF1c2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2NlbmU7IiwiY29uc3QgU2NlbmUgPSByZXF1aXJlKFwiLi4vc2NlbmVcIik7XHJcblxyXG5jbGFzcyBCb290IGV4dGVuZHMgU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJCb290XCIpO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIHN1cGVyLnByZWxvYWQoKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJncm91bmRcIiwgXCJkYXRhL2dyb3VuZC5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiY2l0eVwiLCBcImRhdGEvY2l0eS5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwiY2xvdWRcIiwgXCJkYXRhL2Nsb3VkLnBuZ1wiKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcInRyZWUxXCIsIFwiZGF0YS90cmVlMS5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwidHJlZTJcIiwgXCJkYXRhL3RyZWUyLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJ0cmVlM1wiLCBcImRhdGEvdHJlZTMucG5nXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcInRyZWU0XCIsIFwiZGF0YS90cmVlNC5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwidHJlZTVcIiwgXCJkYXRhL3RyZWU1LnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJ0cmVlNlwiLCBcImRhdGEvdHJlZTYucG5nXCIpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwibGlnaHRcIiwgXCJkYXRhL2xpZ2h0LnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJiZW5jaFwiLCBcImRhdGEvYmVuY2gucG5nXCIpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwicG9sZVwiLCBcImRhdGEvcG9sZS5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwicG9sZS0xXCIsIFwiZGF0YS9wb2xlLTEucG5nXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcInBvbGUtMlwiLCBcImRhdGEvcG9sZS0yLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJwb2xlKzFcIiwgXCJkYXRhL3BvbGUrMS5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwicG9sZSsyXCIsIFwiZGF0YS9wb2xlKzIucG5nXCIpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKFwibGFtcC0xLW9uXCIsIFwiZGF0YS9sYW1wLTEtb24ucG5nXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImxhbXAtMS1vZmZcIiwgXCJkYXRhL2xhbXAtMS1vZmYucG5nXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZShcImxhbXAtMi1vblwiLCBcImRhdGEvbGFtcC0yLW9uLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoXCJsYW1wLTItb2ZmXCIsIFwiZGF0YS9sYW1wLTItb2ZmLnBuZ1wiKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBzdXBlci5jcmVhdGUoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KFwiUGxheVwiKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vIH0sIDIwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7IiwiY29uc3QgU2NlbmUgPSByZXF1aXJlKFwiLi4vc2NlbmVcIik7XHJcblxyXG5jbGFzcyBQbGF5IGV4dGVuZHMgU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJQbGF5XCIpO1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcbiAgICB9XHJcbiAgICBwcmVsb2FkKCkge1xyXG4gICAgICAgIHN1cGVyLnByZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBzdXBlci5jcmVhdGUoKTtcclxuICAgICAgICB0aGlzLnJ1blNwYWNlKFwibWF4XCIpO1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnBhdXNlU3BhY2UoKTtcclxuICAgICAgICAvLyB9LCA2MDAwKTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQbGF5OyJdfQ=="}